{
  "table": "profile_classification_audit",
  "pass": "pass-1",
  "required": ["processing_session_id", "shell_file_id", "recommended_profile_type"],
  "fields": {
    "processing_session_id": "uuid (context, cross-pass join key)",
    "shell_file_id": "uuid (source document)",
    "recommended_profile_type": "self|child|adult_dependent|pet (NOT NULL)",
    "profile_confidence": "numeric(4,3)? 0.000-1.000",
    "identity_extraction_results": "jsonb? (identity markers)",
    "contamination_risk_score": "numeric(4,3)? 0.000-1.000",
    "contamination_checks_performed": "jsonb? (safety check details)",
    "contamination_warnings": "string[]? (contamination warnings)",
    "cross_profile_risk_detected": "boolean? (default: false)",
    "identity_consistency_score": "numeric(4,3)? 0.000-1.000",
    "identity_markers_found": "string[]? (identity marker types)",
    "age_indicators": "string[]? (age-related markers)",
    "relationship_indicators": "string[]? (relationship markers)",
    "medicare_number_detected": "boolean? (default: false)",
    "healthcare_identifier_type": "string? (identifier type)",
    "healthcare_provider_context": "string? (provider context)",
    "classification_reasoning": "string? (AI reasoning)",
    "manual_review_required": "boolean? (default: false)",
    "reviewed_by_user": "boolean? (default: false)",
    "final_profile_assignment": "self|child|adult_dependent|pet?",
    "medical_appropriateness_score": "numeric(4,3)? 0.000-1.000",
    "age_appropriateness_validated": "boolean? (default: false)",
    "safety_flags": "string[]? (safety concerns)",
    "ai_model_used": "string? (default: gpt-4o-mini)",
    "validation_method": "automated|human_guided|manual_review? (default: automated)"
  },
  "safety_critical": {
    "contamination_prevention": "contamination_risk_score, contamination_warnings, cross_profile_risk_detected - CRITICAL for patient safety",
    "manual_review_triggers": "Set manual_review_required=true when contamination_risk_score > 0.3 OR cross_profile_risk_detected=true OR profile_confidence < 0.7"
  },
  "cross_pass_keys": {
    "processing_session_id": "Primary join for cross-pass analytics",
    "shell_file_id": "Document tracking"
  },
  "example": {
    "processing_session_id": "uuid-of-ai-session",
    "shell_file_id": "uuid-of-processed-document",
    "recommended_profile_type": "self",
    "profile_confidence": 0.950,
    "identity_extraction_results": {
      "name_found": "John Smith",
      "dob_found": "1985-03-15",
      "medicare_number": "2123 45678 9"
    },
    "contamination_risk_score": 0.050,
    "contamination_checks_performed": {
      "name_consistency": "passed",
      "date_consistency": "passed",
      "age_consistency": "passed"
    },
    "contamination_warnings": [],
    "cross_profile_risk_detected": false,
    "identity_consistency_score": 0.950,
    "identity_markers_found": ["full_name", "dob", "medicare_number", "address"],
    "age_indicators": ["adult_age_range", "medicare_card_holder"],
    "relationship_indicators": [],
    "medicare_number_detected": true,
    "healthcare_identifier_type": "medicare",
    "healthcare_provider_context": "General Practitioner",
    "classification_reasoning": "Document contains consistent adult identity markers with Medicare number matching patient age. No contamination indicators detected.",
    "manual_review_required": false,
    "medical_appropriateness_score": 0.980,
    "age_appropriateness_validated": true,
    "safety_flags": [],
    "ai_model_used": "gpt-4o-mini",
    "validation_method": "automated"
  }
}
